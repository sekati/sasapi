/** * com.sekati.load.BaseLoader * @version 1.0.0 * @author jason m horwitz | sekati.com | tendercreative.com * Copyright (C) 2007  jason m horwitz, Sekat LLC. All Rights Reserved. * Released under the MIT License: http://www.opensource.org/licenses/mit-license.php */ package com.sekati.load {	import com.sekati.display.Document;	import flash.events.Event;	import flash.events.EventDispatcher;	/**	 * Generic Movie Preloader - stops movie, preloads, then advances to defined frame label.	 * @example var preload:BaseLoader = new BaseLoader("finalFrameLabel");	 * @see http://board.flashkit.com/board/showthread.php?t=706837	 * @see http://blog.hexagonstar.com/howto_create_preloader_with_as3/	 * @see http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00000818.html	 */	public class BaseLoader extends EventDispatcher {		private var _nextFrameLabel:String;		private var _isLoaded:Boolean;		private var _l:Number;		private var _t:Number;		private var _p:Number;		/**		 * Constructor		 */		public function BaseLoader(frameLabel:String = "bootstrap") {			super( );			//Document.root.stop( );			_nextFrameLabel = frameLabel;			addEventListener( Event.ENTER_FRAME, _onEnterFrame );		}		private function _onEnterFrame():void {			_l = Document.stage.loaderInfo.bytesLoaded;			_t = Document.stage.loaderInfo.bytesTotal;			_p = Math.floor( _l / _t * 100 );			if (_t > 5 && _l >= _t) {				_isLoaded = true;				removeEventListener( Event.ENTER_FRAME, _onEnterFrame );				//Document.root.gotoAndStop( _nextFrameLabel );				//this.destroy( );			}		}			}}